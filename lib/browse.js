var $e=Object.create,A=Object.defineProperty;var Ce=Object.getOwnPropertyDescriptor;var Ee=Object.getOwnPropertyNames;var Me=Object.getPrototypeOf,Oe=Object.prototype.hasOwnProperty;var L=e=>A(e,"__esModule",{value:!0});var h=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Te=(e,t)=>{for(var r in t)A(e,r,{get:t[r],enumerable:!0})},Be=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Ee(t))!Oe.call(e,o)&&o!=="default"&&A(e,o,{get:()=>t[o],enumerable:!(r=Ce(t,o))||r.enumerable});return e},c=e=>Be(L(A(e!=null?$e(Me(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var te=h((zt,ee)=>{var Y=class{constructor(t){this.value=t,this.next=void 0}},Z=class{constructor(){this.clear()}enqueue(t){let r=new Y(t);this._head?(this._tail.next=r,this._tail=r):(this._head=r,this._tail=r),this._size++}dequeue(){let t=this._head;if(!!t)return this._head=this._head.next,this._size--,t.value}clear(){this._head=void 0,this._tail=void 0,this._size=0}get size(){return this._size}*[Symbol.iterator](){let t=this._head;for(;t;)yield t.value,t=t.next}};ee.exports=Z});var oe=h((Lt,re)=>{"use strict";var ct=te(),lt=e=>{if(!((Number.isInteger(e)||e===Infinity)&&e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");let t=new ct,r=0,o=()=>{r--,t.size>0&&t.dequeue()()},n=async(p,v,...b)=>{r++;let z=(async()=>p(...b))();v(z);try{await z}catch{}o()},f=(p,v,...b)=>{t.enqueue(n.bind(null,p,v,...b)),(async()=>{await Promise.resolve(),r<e&&t.size>0&&t.dequeue()()})()},s=(p,...v)=>new Promise(b=>{f(p,b,...v)});return Object.defineProperties(s,{activeCount:{get:()=>r},pendingCount:{get:()=>t.size},clearQueue:{value:()=>{t.clear()}}}),s};re.exports=lt});var ae=h((Rt,ne)=>{"use strict";var se=oe(),E=class extends Error{constructor(t){super();this.value=t}},pt=async(e,t)=>t(await e),mt=async e=>{let t=await Promise.all(e);if(t[1]===!0)throw new E(t[0]);return!1},dt=async(e,t,r)=>{r={concurrency:Infinity,preserveOrder:!0,...r};let o=se(r.concurrency),n=[...e].map(s=>[s,o(pt,s,t)]),f=se(r.preserveOrder?1:Infinity);try{await Promise.all(n.map(s=>f(mt,s)))}catch(s){if(s instanceof E)return s.value;throw s}};ne.exports=dt});var de=h((Nt,M)=>{"use strict";var ie=require("path"),j=require("fs"),{promisify:ce}=require("util"),ut=ae(),ft=ce(j.stat),gt=ce(j.lstat),le={directory:"isDirectory",file:"isFile"};function pe({type:e}){if(!(e in le))throw new Error(`Invalid type specified: ${e}`)}var me=(e,t)=>e===void 0||t[le[e]]();M.exports=async(e,t)=>{t={cwd:process.cwd(),type:"file",allowSymlinks:!0,...t},pe(t);let r=t.allowSymlinks?ft:gt;return ut(e,async o=>{try{let n=await r(ie.resolve(t.cwd,o));return me(t.type,n)}catch{return!1}},t)};M.exports.sync=(e,t)=>{t={cwd:process.cwd(),allowSymlinks:!0,type:"file",...t},pe(t);let r=t.allowSymlinks?j.statSync:j.lstatSync;for(let o of e)try{let n=r(ie.resolve(t.cwd,o));if(me(t.type,n))return o}catch{}}});var fe=h((Ut,O)=>{"use strict";var ue=require("fs"),{promisify:ht}=require("util"),yt=ht(ue.access);O.exports=async e=>{try{return await yt(e),!0}catch(t){return!1}};O.exports.sync=e=>{try{return ue.accessSync(e),!0}catch(t){return!1}}});var he=h((Wt,w)=>{"use strict";var u=require("path"),q=de(),ge=fe(),T=Symbol("findUp.stop");w.exports=async(e,t={})=>{let r=u.resolve(t.cwd||""),{root:o}=u.parse(r),n=[].concat(e),f=async s=>{if(typeof e!="function")return q(n,s);let p=await e(s.cwd);return typeof p=="string"?q([p],s):p};for(;;){let s=await f({...t,cwd:r});if(s===T)return;if(s)return u.resolve(r,s);if(r===o)return;r=u.dirname(r)}};w.exports.sync=(e,t={})=>{let r=u.resolve(t.cwd||""),{root:o}=u.parse(r),n=[].concat(e),f=s=>{if(typeof e!="function")return q.sync(n,s);let p=e(s.cwd);return typeof p=="string"?q.sync([p],s):p};for(;;){let s=f({...t,cwd:r});if(s===T)return;if(s)return u.resolve(r,s);if(r===o)return;r=u.dirname(r)}};w.exports.exists=ge;w.exports.sync.exists=ge.sync;w.exports.stop=T});L(exports);Te(exports,{default:()=>St});var Ie=c(require("atom"));var ze="browse",Le="3.5.0",Re="Adds commands that let you quickly browse Atom-related folders or reveal files you're working on",Ne={build:"node ./tools/build.mjs",clean:"rimraf ./lib",dev:"npm run start","lint:json":"jsonlint ./keymaps/*.json menus/*.json --quiet","lint:md":"remark . --quiet --frail --ignore-path .gitignore","lint:ts":"eslint ./src --ignore-path .gitignore",lint:"npm-run-all lint:*",prepublishOnly:"npm run clean && npm run build",start:"cross-env ESBUILD_WATCH=true node ./tools/build.mjs",test:"npm run lint"},Ue="./lib/browse",We="./types",He=[],Qe={type:"git",url:"https://github.com/idleberg/atom-browse"},Ke="https://atom.io/packages/browse",Ge={url:"https://github.com/idleberg/atom-browse/issues"},Je="MIT",Ve={atom:">=1.52.0 <2.0.0"},Xe=["core:loaded-shell-environment"],Ye={browse:{description:"Opens files/folders in your file manager",versions:{"1.0.0":"provideBrowse"}}},Ze={"@atxm/developer-console":"^0.5.0","@stylelint/remark-preset":"^2.0.0","@types/atom":"^1.40.4","@types/node":"^15.3.1","@typescript-eslint/eslint-plugin":"^4.24.0","@typescript-eslint/parser":"^4.24.0","atom-package-deps":"^7.0.3","cross-env":"^7.0.3",esbuild:"^0.12.1",eslint:"^7.26.0","eslint-plugin-json":"^3.0.0","find-up":"^5.0.0",husky:">=4.3 <5",jsonlint:"^1.6.3","lint-staged":"^11.0.0","log-symbols":"^5.0.0","npm-run-all":"^4.1.5",prettier:"^2.3.0","remark-cli":"^9.0.0",rimraf:"^3.0.2",stylelint:"^13.13.1",tslib:"^2.0.3",typescript:"^4.1.3"},et={plugins:["@stylelint/remark-preset"]},tt={hooks:{"pre-commit":"lint-staged"}},rt={"*.json":"jsonlint --quiet","*.md":"prettier --write","*.ts":"eslint --cache --fix"},k={name:ze,version:Le,description:Re,scripts:Ne,main:Ue,typings:We,keywords:He,repository:Qe,homepage:Ke,bugs:Ge,license:Je,engines:Ve,activationHooks:Xe,providedServices:Ye,devDependencies:Ze,remarkConfig:et,husky:tt,"lint-staged":rt};function y(e,t){for(var r=0,o=t.length,n=e.length;r<o;r++,n++)e[n]=t[r];return e}var ot=function(){function e(t){t===void 0&&(t={}),this.name=t.name,this.styleSheet=`
      background-color: `+(t.backgroundColor||"darkgrey")+`;
      border-radius: 2px;
      color: `+(t.color||"white")+`;
      line-height: 1.5;
      padding: 1px 4px;
      text-shadow: 0 1px 0px rgba(0, 0, 0, 0.2);
    `}return e.prototype.__console__=function(t){for(var r,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];!(atom==null?void 0:atom.inDevMode())||(o.unshift("%c"+this.name+"%c",this.styleSheet,""),(r=window.console)[t].apply(r,o))},e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.__console__.apply(this,y(["debug"],t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.__console__.apply(this,y(["error"],t))},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.__console__.apply(this,y(["info"],t))},e.prototype.log=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.__console__.apply(this,y(["log"],t))},e.prototype.trace=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.__console__.apply(this,y(["trace"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.__console__.apply(this,y(["warn"],t))},e}(),R=ot;var l=new R({name:k.name,backgroundColor:"mediumseagreen"});var N=c(require("os")),st=()=>{if((0,N.platform)()==="darwin"){let e;switch(atom.getReleaseChannel()){case"beta":e="Atom Beta";break;case"nightly":e="Atom Nightly";break;default:e="Atom";break}return{title:"Open App Package",description:`Specify whether *Browse: Application Folder* opens the \`${e}.app\` package or the executable that started the Node.js process (i.e. \`Atom Helper\`)`,type:"boolean",default:!0,order:3}}else return{}},U={notify:{title:"Notifications",description:"Specify which types of notifications to display",type:"string",enum:[{value:"none",description:"None"},{value:"warnings",description:"Warnings Only"},{value:"all",description:"All Notifications"}],default:"all",order:1},dependencyPaths:{title:"Dependency Paths",description:"Specify dependency folders that can be opened using the *Browse: Dependency Folders* command",type:"array",default:["bower_components","node_modules","vendor"],items:{type:["string"]},order:2},beep:{title:"Beep on error",description:"Play beep sound when errors occur",type:"boolean",default:!0,order:3},openAppPackage:st(),customFileManager:{title:"Custom File Manager Options",type:"object",order:5,properties:{fullPath:{title:"Full Path",description:"Specify the full path to a custom file manager",type:"string",default:"",order:1},openArgs:{title:"Open Arguments",description:"Specify custom arguments to open a folder. The use of the `%path%` placeholder is optional.",type:"array",default:[],items:{type:["string","integer"]},order:2},revealArgs:{title:"Reveal Arguments",description:"Specify custom arguments to reveal a file. The use of the `%path%` placeholder is optional.",type:"array",default:[],items:{type:["string","integer"]},order:3}}}};var D=c(require("path"));var $=c(require("path")),g=c(require("fs")),W=c(require("os")),H=c(require("util")),F=c(require("electron")),Q=c(require("child_process"));var K=(0,H.promisify)(Q.spawn);async function nt(e){try{await g.promises.access(e,g.constants.F_OK)}catch(t){return l.warn(`Skipping '${e}' \u2013 not found`),!1}return!0}async function G(e){let t;try{t=await g.promises.lstat(e)}catch(r){return l.error(r),!1}return t.isDirectory()}async function C(e){let t;try{t=await g.promises.lstat(e)}catch(r){return l.error(r),!1}return t.isFile()}async function at(e){let t;try{t=await g.promises.stat(e)}catch(r){return l.warn(`Skipping '${e}' \u2013 not found`),!1}return t.isDirectory()}var m=(e="")=>atom.config.get(`browse.${e}`),J=()=>atom.packages.getPackageDirPaths().filter(t=>!t.includes("app.asar")),V=()=>{switch((0,W.platform)()){case"darwin":return"Finder";case"win32":return"Explorer";default:return"file manager"}};async function i(e){if(!e.path.length||!await at(e.path))return;let t=m("customFileManager.fullPath");if(t){let r=m("customFileManager.openArgs");if(r.length>0)if(r.includes("%path%")){let o=r.indexOf("%path%");r[o]=r[o].replace("%path%",e.path)}else r.push(e.path);else r=[e.path];e.silent||_(e.message?String(e.message):`Opening '${e.name}' in custom file manager`),K(t,r,{})}else{e.silent||_(e.message?String(e.message):`Opening '${e.name}' in ${V()}`);try{await F.shell.openPath(e.path)}catch(r){F.shell.openItem&&F.shell.openItem(e.path)}}}async function S(e){if(!e.path.length||!await nt(e.path))return;let t=m("customFileManager.fullPath");if(t){let r=m("customFileManager.revealArgs");if(r.length>0)if(r.includes("%path%")){let o=r.indexOf("%path%");r[o]=r[o].replace("%path%",e.path)}else r.push(e.path);else r=[e.path];e.silent||_(e.message?String(e.message):`Revealing \`${(0,$.basename)(e.path)}\` in custom file manager`),K(t,r,{})}else e.silent||_(e.message?String(e.message):`Revealing \`${(0,$.basename)(e.path)}\` in ${V()}`),F.shell.showItemInFolder(e.path)}function _(e,t=!1){m("notify")==="all"&&atom.notifications.addInfo(`**${k.name}** ${e}`,{dismissable:t,icon:"check"}),l.info(`${e}`)}function d(e,t=!1){m("notify")!=="none"&&atom.notifications.addWarning(`**${k.name}** ${e}`,{dismissable:t}),m("beep")&&atom.beep(),l.warn(`${e}`)}function it(){let e=(0,D.dirname)(atom.config.getUserConfigPath()),t=(0,D.resolve)(e,".apm");i({name:".apm Folder",path:t})}var X=it;var ye=c(require("os")),P=c(require("path")),we=c(he());async function wt(){let e=(0,P.dirname)((0,P.resolve)(process.execPath)),t;if((0,ye.platform)()==="darwin"&&m("openAppPackage")){let r=we.default.sync("Resources",{cwd:e,type:"directory"});t=r?(0,P.dirname)(r):e}else t=e;i({name:"Application Folder",path:t})}var ve=wt;var x=c(require("os")),I=c(require("path"));function vt(){let e;switch((0,x.platform)()){case"darwin":e=(0,I.resolve)((0,x.homedir)(),"Library","Application Support","Atom");break;case"win32":e=process.env.APPDATA?(0,I.resolve)(process.env.APPDATA,"Atom"):"";break;default:e=(0,I.resolve)((0,x.homedir)(),".config","Atom");break}i({name:"App Data Folder",path:e})}var be=vt;var ke=c(require("path"));async function bt(e){typeof e=="string"&&(l.log("Auto-handle string input"),e={action:await C(e)?"reveal":"open",target:e}),(Array.isArray(e.target)?e.target:[e.target]).map(async r=>{typeof r!="string"&&l.warn(`Skipping: target path is of type ${typeof r}, should be string`),e.action==="reveal"||await C(r)?S({path:r,message:e.message,silent:e.silent}):e.action==="open"||await G(r)?i({name:(0,ke.basename)(r),path:r,message:e.message,silent:e.silent}):e.action&&l.warn(`Action '${e.action}' is not supported`)})}var Fe=bt;var Pe=c(require("path"));async function kt(){let e=atom.project.getPaths();if(e.length===0)return d("Editor has no projects");let t=m("dependencyPaths");if(!t||!t.length)return d("No dependency folders specified in package configuration");e.map(r=>{r.startsWith("atom://")||t.map(async o=>{let n=(0,Pe.resolve)(r,o);i({name:`\`${o}\``,path:n})})})}var xe=kt;function Ft(){J().map(t=>{i({name:"Packages Folder",path:t})})}var Ae=Ft;async function Pt(){let e=atom.project.getPaths();if(e.length===0)return d("Editor has no projects");e.map(t=>{t.startsWith("atom://")||i({name:"Project Folder",path:t})})}var Se=Pt;var _e=c(require("path"));function xt(){let e=(0,_e.dirname)(atom.config.getUserConfigPath());i({name:"Configuration Folder",path:e})}var De=xt;async function At(){let e=atom.commandInstaller.getResourcesDirectory();i({name:"Resources Folder",path:e})}var je=At;async function B(e){let t=e||atom.workspace.getActiveTextEditor()||atom.workspace.getActivePaneItem();if(t&&(t.constructor.name==="TextEditor"||t.constructor.name==="ImageEditor")){let r=t.buffer.file?t.buffer.file.path:"";r?S({path:r}):d("File hasn't been saved yet")}else d("Active pane is not an editor")}async function qe(){let e=atom.workspace.getPaneItems();e.length?e.map(t=>{B(t)}):d("No active files")}var St={config:U,subscriptions:new Ie.CompositeDisposable,async activate(){l.log("Activating package"),this.subscriptions.add(atom.commands.add("atom-workspace",{"browse:.apm-folder":()=>X()})),this.subscriptions.add(atom.commands.add("atom-workspace",{"browse:application-folder":()=>ve()})),this.subscriptions.add(atom.commands.add("atom-workspace",{"browse:configuration-folder":()=>De()})),this.subscriptions.add(atom.commands.add("atom-workspace",{"browse:app-data-folder":()=>be()})),this.subscriptions.add(atom.commands.add("atom-workspace",{"browse:packages-folder":()=>Ae()})),this.subscriptions.add(atom.commands.add("atom-workspace",{"browse:project-folders":()=>Se()})),this.subscriptions.add(atom.commands.add("atom-workspace",{"browse:project-dependencies":()=>xe()})),this.subscriptions.add(atom.commands.add("atom-workspace",{"browse:resources-folder":()=>je()})),this.subscriptions.add(atom.commands.add("atom-workspace",{"browse:reveal-open-files":()=>qe()})),this.subscriptions.add(atom.commands.add("atom-workspace",{"browse:reveal-file":()=>B()}))},deactivate(){l.log("Deactivating package"),this.subscriptions&&this.subscriptions.dispose()},provideBrowse(){return l.log("Providing service"),Fe}};0&&(module.exports={});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
//# sourceMappingURL=browse.js.map
